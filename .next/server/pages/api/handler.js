"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/handler";
exports.ids = ["pages/api/handler"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "./pages/api/handler/index.js":
/*!************************************!*\
  !*** ./pages/api/handler/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../services/user */ \"./services/user.ts\");\n/* harmony import */ var _services_mongo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../services/mongo */ \"./services/mongo.js?2902\");\n\n\n\nasync function handler(req, res) {\n    // switch the methods\n    switch(req.method){\n        case \"POST\":\n            {\n                return addUser(req, res);\n            }\n        case \"PUT\":\n            {\n                return updateSaved(req, res);\n            }\n        case \"DELETE\":\n            {\n                return deletedSaved(req, res);\n            }\n    }\n};\nasync function addUser(req, res) {\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        let response = new _services_user__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            email: req.body,\n            saved: []\n        });\n        response.save();\n        return res.json({\n            message: response,\n            success: false\n        });\n    } catch (error) {\n        // return an error\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\nasync function updateSaved(req, res) {\n    const { email , registration , engineSize , fuelType , make , model , primaryColour , score , avgScore , mileage ,  } = JSON.parse(req.body);\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        const user = await _services_user__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n            email\n        }, {\n            $push: {\n                saved: {\n                    registration,\n                    engineSize,\n                    fuelType,\n                    make,\n                    model,\n                    primaryColour,\n                    score,\n                    avgScore,\n                    mileage\n                }\n            }\n        }, {\n            upsert: true,\n            runValidators: true\n        }, function(err, doc) {});\n        return res.json({\n            message: JSON.parse(JSON.stringify(user)),\n            success: true\n        });\n    } catch (error) {\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\nasync function deletedSaved(req, res) {\n    const { email , registration , engineSize , fuelType , make , model , primaryColour , score , avgScore , mileage ,  } = JSON.parse(req.body);\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        const user = await _services_user__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n            email\n        }, {\n            $pull: {\n                saved: {\n                    registration,\n                    engineSize,\n                    fuelType,\n                    make,\n                    model,\n                    primaryColour,\n                    score,\n                    avgScore,\n                    mileage\n                }\n            }\n        }, {\n            upsert: true,\n            runValidators: true\n        }, function(err, doc) {});\n        return res.json({\n            message: user,\n            success: false\n        });\n    } catch (error) {\n        // return an error\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxDQUFDO1lBQ2ZDLE9BQU8sRUFBRWUsSUFBSTtZQUNiZCxPQUFPLEVBQUUsS0FBSztRQUNoQixDQUFDO0lBQ0gsQ0FBQyxDQUFDLEtBQUssRUFBRUMsS0FBSyxFQUFFLENBQUM7UUFDZixFQUFrQjtRQUNsQixNQUFNLENBQUNkLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLENBQUM7WUFDZkMsT0FBTyxFQUFFLEdBQUcsQ0FBQ0csS0FBSyxDQUFDRCxLQUFLLEVBQUVGLE9BQU87WUFDakNDLE9BQU8sRUFBRSxLQUFLO1FBQ2hCLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlc2NvcmVhbnljYXIvLi9wYWdlcy9hcGkvaGFuZGxlci9pbmRleC5qcz84NmI4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtb25nb29zZSBmcm9tIFwibW9uZ29vc2VcIjtcbmltcG9ydCBVc2VyTW9kZWwgZnJvbSBcIi4uLy4uLy4uL3NlcnZpY2VzL3VzZXJcIjtcbmltcG9ydCBjbGllbnRQcm9taXNlIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy9tb25nb1wiO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XG4gIC8vIHN3aXRjaCB0aGUgbWV0aG9kc1xuICBzd2l0Y2ggKHJlcS5tZXRob2QpIHtcbiAgICBjYXNlIFwiUE9TVFwiOiB7XG4gICAgICByZXR1cm4gYWRkVXNlcihyZXEsIHJlcyk7XG4gICAgfVxuICAgIGNhc2UgXCJQVVRcIjoge1xuICAgICAgcmV0dXJuIHVwZGF0ZVNhdmVkKHJlcSwgcmVzKTtcbiAgICB9XG5cbiAgICBjYXNlIFwiREVMRVRFXCI6IHtcbiAgICAgIHJldHVybiBkZWxldGVkU2F2ZWQocmVxLCByZXMpO1xuICAgIH1cbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBhZGRVc2VyKHJlcSwgcmVzKSB7XG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoXG4gICAgXCJtb25nb2RiK3NydjovL2phbWVzOkphbWllZDEyM0BjYXJzLm5hdHQ1Lm1vbmdvZGIubmV0L2NhcnM/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5XCJcbiAgKTtcblxuICB0cnkge1xuICAgIGxldCByZXNwb25zZSA9IG5ldyBVc2VyTW9kZWwoeyBlbWFpbDogcmVxLmJvZHksIHNhdmVkOiBbXSB9KTtcbiAgICByZXNwb25zZS5zYXZlKCk7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IHJlc3BvbnNlLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gcmV0dXJuIGFuIGVycm9yXG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IG5ldyBFcnJvcihlcnJvcikubWVzc2FnZSxcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIH0pO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNhdmVkKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHtcbiAgICBlbWFpbCxcbiAgICByZWdpc3RyYXRpb24sXG4gICAgZW5naW5lU2l6ZSxcbiAgICBmdWVsVHlwZSxcbiAgICBtYWtlLFxuICAgIG1vZGVsLFxuICAgIHByaW1hcnlDb2xvdXIsXG4gICAgc2NvcmUsXG4gICAgYXZnU2NvcmUsXG4gICAgbWlsZWFnZSxcbiAgfSA9IEpTT04ucGFyc2UocmVxLmJvZHkpO1xuICBhd2FpdCBtb25nb29zZS5jb25uZWN0KFxuICAgIFwibW9uZ29kYitzcnY6Ly9qYW1lczpKYW1pZWQxMjNAY2Fycy5uYXR0NS5tb25nb2RiLm5ldC9jYXJzP3JldHJ5V3JpdGVzPXRydWUmdz1tYWpvcml0eVwiXG4gICk7XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgVXNlck1vZGVsLnVwZGF0ZU9uZShcbiAgICAgIHsgZW1haWwgfSxcbiAgICAgIHtcbiAgICAgICAgJHB1c2g6IHtcbiAgICAgICAgICBzYXZlZDoge1xuICAgICAgICAgICAgcmVnaXN0cmF0aW9uLFxuICAgICAgICAgICAgZW5naW5lU2l6ZSxcbiAgICAgICAgICAgIGZ1ZWxUeXBlLFxuICAgICAgICAgICAgbWFrZSxcbiAgICAgICAgICAgIG1vZGVsLFxuICAgICAgICAgICAgcHJpbWFyeUNvbG91cixcbiAgICAgICAgICAgIHNjb3JlLFxuICAgICAgICAgICAgYXZnU2NvcmUsXG4gICAgICAgICAgICBtaWxlYWdlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgeyB1cHNlcnQ6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWUgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIsIGRvYykge31cbiAgICApO1xuXG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodXNlcikpLFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogbmV3IEVycm9yKGVycm9yKS5tZXNzYWdlLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlZFNhdmVkKHJlcSwgcmVzKSB7XG4gIGNvbnN0IHtcbiAgICBlbWFpbCxcbiAgICByZWdpc3RyYXRpb24sXG4gICAgZW5naW5lU2l6ZSxcbiAgICBmdWVsVHlwZSxcbiAgICBtYWtlLFxuICAgIG1vZGVsLFxuICAgIHByaW1hcnlDb2xvdXIsXG4gICAgc2NvcmUsXG4gICAgYXZnU2NvcmUsXG4gICAgbWlsZWFnZSxcbiAgfSA9IEpTT04ucGFyc2UocmVxLmJvZHkpO1xuXG4gIGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoXG4gICAgXCJtb25nb2RiK3NydjovL2phbWVzOkphbWllZDEyM0BjYXJzLm5hdHQ1Lm1vbmdvZGIubmV0L2NhcnM/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5XCJcbiAgKTtcblxuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBVc2VyTW9kZWwudXBkYXRlT25lKFxuICAgICAgeyBlbWFpbCB9LFxuICAgICAge1xuICAgICAgICAkcHVsbDoge1xuICAgICAgICAgIHNhdmVkOiB7XG4gICAgICAgICAgICByZWdpc3RyYXRpb24sXG4gICAgICAgICAgICBlbmdpbmVTaXplLFxuICAgICAgICAgICAgZnVlbFR5cGUsXG4gICAgICAgICAgICBtYWtlLFxuICAgICAgICAgICAgbW9kZWwsXG4gICAgICAgICAgICBwcmltYXJ5Q29sb3VyLFxuICAgICAgICAgICAgc2NvcmUsXG4gICAgICAgICAgICBhdmdTY29yZSxcbiAgICAgICAgICAgIG1pbGVhZ2UsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB7IHVwc2VydDogdHJ1ZSwgcnVuVmFsaWRhdG9yczogdHJ1ZSB9LFxuICAgICAgZnVuY3Rpb24gKGVyciwgZG9jKSB7fVxuICAgICk7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IHVzZXIsXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyByZXR1cm4gYW4gZXJyb3JcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogbmV3IEVycm9yKGVycm9yKS5tZXNzYWdlLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsIlVzZXJNb2RlbCIsImNsaWVudFByb21pc2UiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwibWV0aG9kIiwiYWRkVXNlciIsInVwZGF0ZVNhdmVkIiwiZGVsZXRlZFNhdmVkIiwiY29ubmVjdCIsInJlc3BvbnNlIiwiZW1haWwiLCJib2R5Iiwic2F2ZWQiLCJzYXZlIiwianNvbiIsIm1lc3NhZ2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJFcnJvciIsInJlZ2lzdHJhdGlvbiIsImVuZ2luZVNpemUiLCJmdWVsVHlwZSIsIm1ha2UiLCJtb2RlbCIsInByaW1hcnlDb2xvdXIiLCJzY29yZSIsImF2Z1Njb3JlIiwibWlsZWFnZSIsIkpTT04iLCJwYXJzZSIsInVzZXIiLCJ1cGRhdGVPbmUiLCIkcHVzaCIsInVwc2VydCIsInJ1blZhbGlkYXRvcnMiLCJlcnIiLCJkb2MiLCJzdHJpbmdpZnkiLCIkcHVsbCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/api/handler/index.js\n");

/***/ }),

/***/ "./services/mongo.js?2902":
/*!***************************!*\
  !*** ./services/mongo.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst uri = \"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\";\nconst options = {\n    useUnifiedTopology: true,\n    useNewUrlParser: true\n};\nlet client;\nlet clientPromise;\nif (!uri) {\n    throw new Error(\"Please add your Mongo URI to .env.local\");\n}\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXJ2aWNlcy9tb25nby5qcz8yOTAyLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFxQztBQUVyQyxLQUFLLENBQUNDLEdBQUcsR0FDUCxDQUF1RjtBQUN6RixLQUFLLENBQUNDLE9BQU8sR0FBRyxDQUFDO0lBQ2ZDLGtCQUFrQixFQUFFLElBQUk7SUFDeEJDLGVBQWUsRUFBRSxJQUFJO0FBQ3ZCLENBQUM7QUFFRCxHQUFHLENBQUNDLE1BQU07QUFDVixHQUFHLENBQUNDLGFBQWE7QUFFakIsRUFBRSxHQUFHTCxHQUFHLEVBQUUsQ0FBQztJQUNULEtBQUssQ0FBQyxHQUFHLENBQUNNLEtBQUssQ0FBQyxDQUF5QztBQUMzRCxDQUFDO0FBRUQsRUFBRSxFQWhCRixJQWdCMEMsRUFBRSxDQUFDO0lBQzNDLEVBQStEO0lBQy9ELEVBQTZFO0lBQzdFLEVBQUUsR0FBR0MsTUFBTSxDQUFDQyxtQkFBbUIsRUFBRSxDQUFDO1FBQ2hDSixNQUFNLEdBQUcsR0FBRyxDQUFDTCxnREFBVyxDQUFDQyxHQUFHLEVBQUVDLE9BQU87UUFDckNNLE1BQU0sQ0FBQ0MsbUJBQW1CLEdBQUdKLE1BQU0sQ0FBQ0ssT0FBTztJQUM3QyxDQUFDO0lBQ0RKLGFBQWEsR0FBR0UsTUFBTSxDQUFDQyxtQkFBbUI7QUFDNUMsQ0FBQyxNQUFNLEVBSU47QUFFRCxFQUFpRTtBQUNqRSxFQUE4RDtBQUM5RCxpRUFBZUgsYUFBYSxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VzY29yZWFueWNhci8uL3NlcnZpY2VzL21vbmdvLmpzP2IwYWQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTW9uZ29DbGllbnQgfSBmcm9tIFwibW9uZ29kYlwiO1xuXG5jb25zdCB1cmkgPVxuICBcIm1vbmdvZGIrc3J2Oi8vamFtZXM6SmFtaWVkMTIzQGNhcnMubmF0dDUubW9uZ29kYi5uZXQvY2Fycz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIjtcbmNvbnN0IG9wdGlvbnMgPSB7XG4gIHVzZVVuaWZpZWRUb3BvbG9neTogdHJ1ZSxcbiAgdXNlTmV3VXJsUGFyc2VyOiB0cnVlLFxufTtcblxubGV0IGNsaWVudDtcbmxldCBjbGllbnRQcm9taXNlO1xuXG5pZiAoIXVyaSkge1xuICB0aHJvdyBuZXcgRXJyb3IoXCJQbGVhc2UgYWRkIHlvdXIgTW9uZ28gVVJJIHRvIC5lbnYubG9jYWxcIik7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gIC8vIEluIGRldmVsb3BtZW50IG1vZGUsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSBzbyB0aGF0IHRoZSB2YWx1ZVxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxuICBpZiAoIWdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucyk7XG4gICAgZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xuICB9XG4gIGNsaWVudFByb21pc2UgPSBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZTtcbn0gZWxzZSB7XG4gIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICBjbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbn1cblxuLy8gRXhwb3J0IGEgbW9kdWxlLXNjb3BlZCBNb25nb0NsaWVudCBwcm9taXNlLiBCeSBkb2luZyB0aGlzIGluIGFcbi8vIHNlcGFyYXRlIG1vZHVsZSwgdGhlIGNsaWVudCBjYW4gYmUgc2hhcmVkIGFjcm9zcyBmdW5jdGlvbnMuXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlO1xuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwidXJpIiwib3B0aW9ucyIsInVzZVVuaWZpZWRUb3BvbG9neSIsInVzZU5ld1VybFBhcnNlciIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJFcnJvciIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./services/mongo.js?2902\n");

/***/ }),

/***/ "./services/user.ts":
/*!**************************!*\
  !*** ./services/user.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst savedSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    registration: {\n        type: String,\n        required: true\n    },\n    engineSize: {\n        type: String,\n        required: true\n    },\n    fuelType: {\n        type: String,\n        required: true\n    },\n    make: {\n        type: String,\n        required: true\n    },\n    model: {\n        type: String,\n        required: true\n    },\n    primaryColour: {\n        type: String,\n        required: true\n    },\n    score: {\n        type: Number,\n        required: true\n    },\n    avgScore: {\n        type: Number,\n        required: true\n    },\n    mileage: {\n        type: Number,\n        required: true\n    }\n});\nlet userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    email: String,\n    saved: [\n        savedSchema\n    ]\n}, {\n    typeKey: \"$type\"\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default().models.User) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXJ2aWNlcy91c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQjtBQUUvQixLQUFLLENBQUNDLFdBQVcsR0FBRyxHQUFHLENBQUNELHdEQUFlLENBQUMsQ0FBQztJQUN2Q0csWUFBWSxFQUFFLENBQUM7UUFDYkMsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREMsVUFBVSxFQUFFLENBQUM7UUFDWEgsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREUsUUFBUSxFQUFFLENBQUM7UUFDVEosSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREcsSUFBSSxFQUFFLENBQUM7UUFDTEwsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREksS0FBSyxFQUFFLENBQUM7UUFDTk4sSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREssYUFBYSxFQUFFLENBQUM7UUFDZFAsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDRE0sS0FBSyxFQUFFLENBQUM7UUFDTlIsSUFBSSxFQUFFUyxNQUFNO1FBQ1pQLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDRFEsUUFBUSxFQUFFLENBQUM7UUFDVFYsSUFBSSxFQUFFUyxNQUFNO1FBQ1pQLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDRFMsT0FBTyxFQUFFLENBQUM7UUFDUlgsSUFBSSxFQUFFUyxNQUFNO1FBQ1pQLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7QUFDSCxDQUFDO0FBRUQsR0FBRyxDQUFDVSxVQUFVLEdBQUcsR0FBRyxDQUFDaEIsd0RBQWUsQ0FDbEMsQ0FBQztJQUNDaUIsS0FBSyxFQUFFWixNQUFNO0lBQ2JhLEtBQUssRUFBRSxDQUFDakI7UUFBQUEsV0FBVztJQUFBLENBQUM7QUFDdEIsQ0FBQyxFQUNELENBQUM7SUFBQ2tCLE9BQU8sRUFBRSxDQUFPO0FBQUMsQ0FBQztBQUd0QixpRUFBZW5CLDZEQUFvQixJQUFJQSxxREFBYyxDQUFDLENBQU0sT0FBRWdCLFVBQVUsQ0FBQyxFQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VzY29yZWFueWNhci8uL3NlcnZpY2VzL3VzZXIudHM/NzQ4MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5cbmNvbnN0IHNhdmVkU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYSh7XG4gIHJlZ2lzdHJhdGlvbjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZW5naW5lU2l6ZToge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgZnVlbFR5cGU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIG1ha2U6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIG1vZGVsOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBwcmltYXJ5Q29sb3VyOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBzY29yZToge1xuICAgIHR5cGU6IE51bWJlcixcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgYXZnU2NvcmU6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIG1pbGVhZ2U6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG59KTtcblxubGV0IHVzZXJTY2hlbWEgPSBuZXcgbW9uZ29vc2UuU2NoZW1hKFxuICB7XG4gICAgZW1haWw6IFN0cmluZyxcbiAgICBzYXZlZDogW3NhdmVkU2NoZW1hXSxcbiAgfSxcbiAgeyB0eXBlS2V5OiBcIiR0eXBlXCIgfVxuKTtcblxuZXhwb3J0IGRlZmF1bHQgbW9uZ29vc2UubW9kZWxzLlVzZXIgfHwgbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpO1xuIl0sIm5hbWVzIjpbIm1vbmdvb3NlIiwic2F2ZWRTY2hlbWEiLCJTY2hlbWEiLCJyZWdpc3RyYXRpb24iLCJ0eXBlIiwiU3RyaW5nIiwicmVxdWlyZWQiLCJlbmdpbmVTaXplIiwiZnVlbFR5cGUiLCJtYWtlIiwibW9kZWwiLCJwcmltYXJ5Q29sb3VyIiwic2NvcmUiLCJOdW1iZXIiLCJhdmdTY29yZSIsIm1pbGVhZ2UiLCJ1c2VyU2NoZW1hIiwiZW1haWwiLCJzYXZlZCIsInR5cGVLZXkiLCJtb2RlbHMiLCJVc2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./services/user.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/api/handler/index.js"));
module.exports = __webpack_exports__;

})();