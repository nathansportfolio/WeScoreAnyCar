"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/handler";
exports.ids = ["pages/api/handler"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "./pages/api/handler/index.js":
/*!************************************!*\
  !*** ./pages/api/handler/index.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _services_user__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../services/user */ \"./services/user.ts\");\n/* harmony import */ var _services_mongo__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../services/mongo */ \"./services/mongo.js\");\n\n\n\nasync function handler(req, res) {\n    // switch the methods\n    switch(req.method){\n        case \"POST\":\n            {\n                return addUser(req, res);\n            }\n        case \"PUT\":\n            {\n                return updateSaved(req, res);\n            }\n        case \"GET\":\n            {\n                return getSaved(req, res);\n            }\n        case \"DELETE\":\n            {\n                return deletedSaved(req, res);\n            }\n    }\n};\nasync function addUser(req, res) {\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        let response = new _services_user__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n            email: req.body,\n            saved: []\n        });\n        response.save();\n        return res.json({\n            message: response,\n            success: false\n        });\n    } catch (error) {\n        // return an error\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\nasync function getSaved(req, res) {\n    const { email  } = req.query;\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        const client = await _services_mongo__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n        const db = client.db(\"cars\");\n        const user = await db.collection(\"users\").find({\n            email\n        });\n        return res.json({\n            message: user,\n            success: false\n        });\n    } catch (error) {\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\nasync function updateSaved(req, res) {\n    const { email , registration , engineSize , fuelType , make , model , primaryColour , score , avgScore  } = JSON.parse(req.body);\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        const user = await _services_user__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n            email\n        }, {\n            $push: {\n                saved: {\n                    registration,\n                    engineSize,\n                    fuelType,\n                    make,\n                    model,\n                    primaryColour,\n                    score,\n                    avgScore\n                }\n            }\n        }, {\n            upsert: true,\n            runValidators: true\n        }, function(err, doc) {}).clone();\n        return res.json({\n            message: JSON.parse(JSON.stringify(user)),\n            success: true\n        });\n    } catch (error) {\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\nasync function deletedSaved(req, res) {\n    const { email , registration  } = req.body;\n    await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(\"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\");\n    try {\n        const user = await _services_user__WEBPACK_IMPORTED_MODULE_1__[\"default\"].updateOne({\n            email\n        }, {\n            $pull: {\n                saved: {\n                    registration\n                }\n            }\n        }, {\n            upsert: true,\n            runValidators: true\n        }, function(err, doc) {});\n        return res.json({\n            message: user,\n            success: false\n        });\n    } catch (error) {\n        // return an error\n        return res.json({\n            message: new Error(error).message,\n            success: false\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNoQixDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUM7ZUFFY1QsWUFBWSxDQUFDTixHQUFHLEVBQUVDLEdBQUcsRUFBRSxDQUFDO0lBQ25DLEtBQUssQ0FBQyxDQUFDUSxDQUFBQSxLQUFLLEdBQUVlLFlBQVksR0FBQyxHQUFHeEIsR0FBRyxDQUFDVSxJQUFJO0lBQ3hDLEtBQUssQ0FBQ2QsdURBQWdCLENBQ3BCLENBQXVGO0lBR3pGLEdBQUcsQ0FBQyxDQUFDO1FBQ0gsS0FBSyxDQUFDeUIsSUFBSSxHQUFHLEtBQUssQ0FBQ3hCLGdFQUFtQixDQUNwQyxDQUFDO1lBQUNZLEtBQUs7UUFBQyxDQUFDLEVBQ1QsQ0FBQztZQUFDaUMsS0FBSyxFQUFFLENBQUM7Z0JBQUMvQixLQUFLLEVBQUUsQ0FBQztvQkFBQ2EsWUFBWTtnQkFBQSxDQUFDO1lBQUMsQ0FBQztRQUFDLENBQUMsRUFDckMsQ0FBQztZQUFDWSxNQUFNLEVBQUUsSUFBSTtZQUFFQyxhQUFhLEVBQUUsSUFBSTtRQUFDLENBQUMsRUFDckMsUUFBUSxDQUFFQyxHQUFHLEVBQUVDLEdBQUcsRUFBRSxDQUFDLENBQUM7UUFFeEIsTUFBTSxDQUFDdEMsR0FBRyxDQUFDWSxJQUFJLENBQUMsQ0FBQztZQUNmQyxPQUFPLEVBQUVPLElBQUk7WUFDYk4sT0FBTyxFQUFFLEtBQUs7UUFDaEIsQ0FBQztJQUNILENBQUMsQ0FBQyxLQUFLLEVBQUVDLEtBQUssRUFBRSxDQUFDO1FBQ2YsRUFBa0I7UUFDbEIsTUFBTSxDQUFDZixHQUFHLENBQUNZLElBQUksQ0FBQyxDQUFDO1lBQ2ZDLE9BQU8sRUFBRSxHQUFHLENBQUNHLEtBQUssQ0FBQ0QsS0FBSyxFQUFFRixPQUFPO1lBQ2pDQyxPQUFPLEVBQUUsS0FBSztRQUNoQixDQUFDO0lBQ0gsQ0FBQztBQUNILENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZXNjb3JlYW55Y2FyLy4vcGFnZXMvYXBpL2hhbmRsZXIvaW5kZXguanM/ODZiOCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9uZ29vc2UgZnJvbSBcIm1vbmdvb3NlXCI7XG5pbXBvcnQgVXNlck1vZGVsIGZyb20gXCIuLi8uLi8uLi9zZXJ2aWNlcy91c2VyXCI7XG5pbXBvcnQgY2xpZW50UHJvbWlzZSBmcm9tIFwiLi4vLi4vLi4vc2VydmljZXMvbW9uZ29cIjtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICAvLyBzd2l0Y2ggdGhlIG1ldGhvZHNcbiAgc3dpdGNoIChyZXEubWV0aG9kKSB7XG4gICAgY2FzZSBcIlBPU1RcIjoge1xuICAgICAgcmV0dXJuIGFkZFVzZXIocmVxLCByZXMpO1xuICAgIH1cbiAgICBjYXNlIFwiUFVUXCI6IHtcbiAgICAgIHJldHVybiB1cGRhdGVTYXZlZChyZXEsIHJlcyk7XG4gICAgfVxuXG4gICAgY2FzZSBcIkdFVFwiOiB7XG4gICAgICByZXR1cm4gZ2V0U2F2ZWQocmVxLCByZXMpO1xuICAgIH1cblxuICAgIGNhc2UgXCJERUxFVEVcIjoge1xuICAgICAgcmV0dXJuIGRlbGV0ZWRTYXZlZChyZXEsIHJlcyk7XG4gICAgfVxuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGFkZFVzZXIocmVxLCByZXMpIHtcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChcbiAgICBcIm1vbmdvZGIrc3J2Oi8vamFtZXM6SmFtaWVkMTIzQGNhcnMubmF0dDUubW9uZ29kYi5uZXQvY2Fycz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIlxuICApO1xuXG4gIHRyeSB7XG4gICAgbGV0IHJlc3BvbnNlID0gbmV3IFVzZXJNb2RlbCh7IGVtYWlsOiByZXEuYm9keSwgc2F2ZWQ6IFtdIH0pO1xuICAgIHJlc3BvbnNlLnNhdmUoKTtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogcmVzcG9uc2UsXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAvLyByZXR1cm4gYW4gZXJyb3JcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogbmV3IEVycm9yKGVycm9yKS5tZXNzYWdlLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH1cbn1cblxuXG5hc3luYyBmdW5jdGlvbiBnZXRTYXZlZChyZXEsIHJlcykge1xuICBjb25zdCB7IGVtYWlsIH0gPSByZXEucXVlcnlcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChcbiAgICBcIm1vbmdvZGIrc3J2Oi8vamFtZXM6SmFtaWVkMTIzQGNhcnMubmF0dDUubW9uZ29kYi5uZXQvY2Fycz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIlxuICApO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgY2xpZW50UHJvbWlzZTtcbiAgICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiY2Fyc1wiKTtcblxuICAgICAgY29uc3QgdXNlciA9IGF3YWl0IGRiXG4gICAgICAgIC5jb2xsZWN0aW9uKFwidXNlcnNcIilcbiAgICAgICAgLmZpbmQoe1xuICAgICAgICAgZW1haWxcbiAgICAgICAgfSlcblxuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiB1c2VyLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IG5ldyBFcnJvcihlcnJvcikubWVzc2FnZSxcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIH0pO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVNhdmVkKHJlcSwgcmVzKSB7XG4gICAgY29uc3Qge2VtYWlsLCByZWdpc3RyYXRpb24sIGVuZ2luZVNpemUsXG4gICAgICBmdWVsVHlwZSxcbiAgICAgIG1ha2UsXG4gICAgICBtb2RlbCxcbiAgICAgIHByaW1hcnlDb2xvdXIsXG4gICAgICBzY29yZSwgYXZnU2NvcmV9ID0gSlNPTi5wYXJzZShyZXEuYm9keSlcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChcbiAgICBcIm1vbmdvZGIrc3J2Oi8vamFtZXM6SmFtaWVkMTIzQGNhcnMubmF0dDUubW9uZ29kYi5uZXQvY2Fycz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIlxuICApO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJNb2RlbC51cGRhdGVPbmUoXG4gICAgICB7IGVtYWlsIH0sXG4gICAgICB7ICRwdXNoOiB7IHNhdmVkOiB7IHJlZ2lzdHJhdGlvbiwgZW5naW5lU2l6ZSxcbiAgICAgICAgZnVlbFR5cGUsXG4gICAgICAgIG1ha2UsXG4gICAgICAgIG1vZGVsLFxuICAgICAgICBwcmltYXJ5Q29sb3VyLFxuICAgICAgICBzY29yZSwgYXZnU2NvcmUgfSB9IH0sXG4gICAgICB7IHVwc2VydDogdHJ1ZSwgcnVuVmFsaWRhdG9yczogdHJ1ZSB9LFxuICAgICAgZnVuY3Rpb24gKGVyciwgZG9jKSB7fVxuICAgICkuY2xvbmUoKTtcbiAgICBcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh1c2VyKSksXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4gcmVzLmpzb24oe1xuICAgICAgbWVzc2FnZTogbmV3IEVycm9yKGVycm9yKS5tZXNzYWdlLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH1cbn1cblxuYXN5bmMgZnVuY3Rpb24gZGVsZXRlZFNhdmVkKHJlcSwgcmVzKSB7XG4gICAgY29uc3Qge2VtYWlsLCByZWdpc3RyYXRpb259ID0gcmVxLmJvZHlcbiAgYXdhaXQgbW9uZ29vc2UuY29ubmVjdChcbiAgICBcIm1vbmdvZGIrc3J2Oi8vamFtZXM6SmFtaWVkMTIzQGNhcnMubmF0dDUubW9uZ29kYi5uZXQvY2Fycz9yZXRyeVdyaXRlcz10cnVlJnc9bWFqb3JpdHlcIlxuICApO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IFVzZXJNb2RlbC51cGRhdGVPbmUoXG4gICAgICB7IGVtYWlsIH0sXG4gICAgICB7ICRwdWxsOiB7IHNhdmVkOiB7IHJlZ2lzdHJhdGlvbn0gfSB9LFxuICAgICAgeyB1cHNlcnQ6IHRydWUsIHJ1blZhbGlkYXRvcnM6IHRydWUgfSxcbiAgICAgIGZ1bmN0aW9uIChlcnIsIGRvYykge31cbiAgICApO1xuICAgIHJldHVybiByZXMuanNvbih7XG4gICAgICBtZXNzYWdlOiB1c2VyLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgLy8gcmV0dXJuIGFuIGVycm9yXG4gICAgcmV0dXJuIHJlcy5qc29uKHtcbiAgICAgIG1lc3NhZ2U6IG5ldyBFcnJvcihlcnJvcikubWVzc2FnZSxcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsibW9uZ29vc2UiLCJVc2VyTW9kZWwiLCJjbGllbnRQcm9taXNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsImFkZFVzZXIiLCJ1cGRhdGVTYXZlZCIsImdldFNhdmVkIiwiZGVsZXRlZFNhdmVkIiwiY29ubmVjdCIsInJlc3BvbnNlIiwiZW1haWwiLCJib2R5Iiwic2F2ZWQiLCJzYXZlIiwianNvbiIsIm1lc3NhZ2UiLCJzdWNjZXNzIiwiZXJyb3IiLCJFcnJvciIsInF1ZXJ5IiwiY2xpZW50IiwiZGIiLCJ1c2VyIiwiY29sbGVjdGlvbiIsImZpbmQiLCJyZWdpc3RyYXRpb24iLCJlbmdpbmVTaXplIiwiZnVlbFR5cGUiLCJtYWtlIiwibW9kZWwiLCJwcmltYXJ5Q29sb3VyIiwic2NvcmUiLCJhdmdTY29yZSIsIkpTT04iLCJwYXJzZSIsInVwZGF0ZU9uZSIsIiRwdXNoIiwidXBzZXJ0IiwicnVuVmFsaWRhdG9ycyIsImVyciIsImRvYyIsImNsb25lIiwic3RyaW5naWZ5IiwiJHB1bGwiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/api/handler/index.js\n");

/***/ }),

/***/ "./services/mongo.js":
/*!***************************!*\
  !*** ./services/mongo.js ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nconst uri = \"mongodb+srv://james:Jamied123@cars.natt5.mongodb.net/cars?retryWrites=true&w=majority\";\nconst options = {\n    useUnifiedTopology: true,\n    useNewUrlParser: true\n};\nlet client;\nlet clientPromise;\nif (!uri) {\n    throw new Error(\"Please add your Mongo URI to .env.local\");\n}\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXJ2aWNlcy9tb25nby5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBcUM7QUFFckMsS0FBSyxDQUFDQyxHQUFHLEdBQ1AsQ0FBdUY7QUFDekYsS0FBSyxDQUFDQyxPQUFPLEdBQUcsQ0FBQztJQUNmQyxrQkFBa0IsRUFBRSxJQUFJO0lBQ3hCQyxlQUFlLEVBQUUsSUFBSTtBQUN2QixDQUFDO0FBRUQsR0FBRyxDQUFDQyxNQUFNO0FBQ1YsR0FBRyxDQUFDQyxhQUFhO0FBRWpCLEVBQUUsR0FBR0wsR0FBRyxFQUFFLENBQUM7SUFDVCxLQUFLLENBQUMsR0FBRyxDQUFDTSxLQUFLLENBQUMsQ0FBeUM7QUFDM0QsQ0FBQztBQUVELEVBQUUsRUFoQkYsSUFnQjBDLEVBQUUsQ0FBQztJQUMzQyxFQUErRDtJQUMvRCxFQUE2RTtJQUM3RSxFQUFFLEdBQUdDLE1BQU0sQ0FBQ0MsbUJBQW1CLEVBQUUsQ0FBQztRQUNoQ0osTUFBTSxHQUFHLEdBQUcsQ0FBQ0wsZ0RBQVcsQ0FBQ0MsR0FBRyxFQUFFQyxPQUFPO1FBQ3JDTSxNQUFNLENBQUNDLG1CQUFtQixHQUFHSixNQUFNLENBQUNLLE9BQU87SUFDN0MsQ0FBQztJQUNESixhQUFhLEdBQUdFLE1BQU0sQ0FBQ0MsbUJBQW1CO0FBQzVDLENBQUMsTUFBTSxFQUlOO0FBRUQsRUFBaUU7QUFDakUsRUFBOEQ7QUFDOUQsaUVBQWVILGFBQWEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlc2NvcmVhbnljYXIvLi9zZXJ2aWNlcy9tb25nby5qcz9iMGFkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuY29uc3QgdXJpID1cbiAgXCJtb25nb2RiK3NydjovL2phbWVzOkphbWllZDEyM0BjYXJzLm5hdHQ1Lm1vbmdvZGIubmV0L2NhcnM/cmV0cnlXcml0ZXM9dHJ1ZSZ3PW1ham9yaXR5XCI7XG5jb25zdCBvcHRpb25zID0ge1xuICB1c2VVbmlmaWVkVG9wb2xvZ3k6IHRydWUsXG4gIHVzZU5ld1VybFBhcnNlcjogdHJ1ZSxcbn07XG5cbmxldCBjbGllbnQ7XG5sZXQgY2xpZW50UHJvbWlzZTtcblxuaWYgKCF1cmkpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiUGxlYXNlIGFkZCB5b3VyIE1vbmdvIFVSSSB0byAuZW52LmxvY2FsXCIpO1xufVxuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09IFwiZGV2ZWxvcG1lbnRcIikge1xuICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcbiAgLy8gaXMgcHJlc2VydmVkIGFjcm9zcyBtb2R1bGUgcmVsb2FkcyBjYXVzZWQgYnkgSE1SIChIb3QgTW9kdWxlIFJlcGxhY2VtZW50KS5cbiAgaWYgKCFnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZSkge1xuICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICAgIGdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbiAgfVxuICBjbGllbnRQcm9taXNlID0gZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2U7XG59IGVsc2Uge1xuICAvLyBJbiBwcm9kdWN0aW9uIG1vZGUsIGl0J3MgYmVzdCB0byBub3QgdXNlIGEgZ2xvYmFsIHZhcmlhYmxlLlxuICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcbiAgY2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XG59XG5cbi8vIEV4cG9ydCBhIG1vZHVsZS1zY29wZWQgTW9uZ29DbGllbnQgcHJvbWlzZS4gQnkgZG9pbmcgdGhpcyBpbiBhXG4vLyBzZXBhcmF0ZSBtb2R1bGUsIHRoZSBjbGllbnQgY2FuIGJlIHNoYXJlZCBhY3Jvc3MgZnVuY3Rpb25zLlxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZTtcbiJdLCJuYW1lcyI6WyJNb25nb0NsaWVudCIsInVyaSIsIm9wdGlvbnMiLCJ1c2VVbmlmaWVkVG9wb2xvZ3kiLCJ1c2VOZXdVcmxQYXJzZXIiLCJjbGllbnQiLCJjbGllbnRQcm9taXNlIiwiRXJyb3IiLCJnbG9iYWwiLCJfbW9uZ29DbGllbnRQcm9taXNlIiwiY29ubmVjdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./services/mongo.js\n");

/***/ }),

/***/ "./services/user.ts":
/*!**************************!*\
  !*** ./services/user.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n\nconst savedSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    registration: {\n        type: String,\n        required: true\n    },\n    engineSize: {\n        type: String,\n        required: true\n    },\n    fuelType: {\n        type: String,\n        required: true\n    },\n    make: {\n        type: String,\n        required: true\n    },\n    model: {\n        type: String,\n        required: true\n    },\n    primaryColour: {\n        type: String,\n        required: true\n    },\n    score: {\n        type: Number,\n        required: true\n    },\n    avgScore: {\n        type: Number,\n        required: true\n    }\n});\nlet userSchema = new (mongoose__WEBPACK_IMPORTED_MODULE_0___default().Schema)({\n    email: String,\n    saved: [\n        savedSchema\n    ]\n}, {\n    typeKey: \"$type\"\n});\nlet user = mongoose__WEBPACK_IMPORTED_MODULE_0___default().model(\"User\", userSchema) || mongoose__WEBPACK_IMPORTED_MODULE_0___default().model('User');\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (user);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zZXJ2aWNlcy91c2VyLnRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUErQjtBQUUvQixLQUFLLENBQUNDLFdBQVcsR0FBRyxHQUFHLENBQUNELHdEQUFlLENBQUMsQ0FBQztJQUN2Q0csWUFBWSxFQUFFLENBQUM7UUFDYkMsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREMsVUFBVSxFQUFFLENBQUM7UUFDWEgsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREUsUUFBUSxFQUFFLENBQUM7UUFDVEosSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREcsSUFBSSxFQUFFLENBQUM7UUFDTEwsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREksS0FBSyxFQUFFLENBQUM7UUFDTk4sSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDREssYUFBYSxFQUFFLENBQUM7UUFDZFAsSUFBSSxFQUFFQyxNQUFNO1FBQ1pDLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDRE0sS0FBSyxFQUFFLENBQUM7UUFDTlIsSUFBSSxFQUFFUyxNQUFNO1FBQ1pQLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7SUFDRFEsUUFBUSxFQUFFLENBQUM7UUFDVFYsSUFBSSxFQUFFUyxNQUFNO1FBQ1pQLFFBQVEsRUFBRSxJQUFJO0lBQ2hCLENBQUM7QUFDSCxDQUFDO0FBRUQsR0FBRyxDQUFDUyxVQUFVLEdBQUcsR0FBRyxDQUFDZix3REFBZSxDQUNsQyxDQUFDO0lBQ0NnQixLQUFLLEVBQUVYLE1BQU07SUFDYlksS0FBSyxFQUFFLENBQUNoQjtRQUFBQSxXQUFXO0lBQUEsQ0FBQztBQUN0QixDQUFDLEVBQ0QsQ0FBQztJQUFDaUIsT0FBTyxFQUFFLENBQU87QUFBQyxDQUFDO0FBR3RCLEdBQUcsQ0FBQ0MsSUFBSSxHQUFHbkIscURBQWMsQ0FBQyxDQUFNLE9BQUVlLFVBQVUsS0FBS2YscURBQWMsQ0FBQyxDQUFNO0FBRXRFLGlFQUFlbUIsSUFBSSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlc2NvcmVhbnljYXIvLi9zZXJ2aWNlcy91c2VyLnRzPzc0ODAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gXCJtb25nb29zZVwiO1xuXG5jb25zdCBzYXZlZFNjaGVtYSA9IG5ldyBtb25nb29zZS5TY2hlbWEoe1xuICByZWdpc3RyYXRpb246IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGVuZ2luZVNpemU6IHtcbiAgICB0eXBlOiBTdHJpbmcsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGZ1ZWxUeXBlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBtYWtlOiB7XG4gICAgdHlwZTogU3RyaW5nLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxuICBtb2RlbDoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgcHJpbWFyeUNvbG91cjoge1xuICAgIHR5cGU6IFN0cmluZyxcbiAgICByZXF1aXJlZDogdHJ1ZSxcbiAgfSxcbiAgc2NvcmU6IHtcbiAgICB0eXBlOiBOdW1iZXIsXG4gICAgcmVxdWlyZWQ6IHRydWUsXG4gIH0sXG4gIGF2Z1Njb3JlOiB7XG4gICAgdHlwZTogTnVtYmVyLFxuICAgIHJlcXVpcmVkOiB0cnVlLFxuICB9LFxufSk7XG5cbmxldCB1c2VyU2NoZW1hID0gbmV3IG1vbmdvb3NlLlNjaGVtYShcbiAge1xuICAgIGVtYWlsOiBTdHJpbmcsXG4gICAgc2F2ZWQ6IFtzYXZlZFNjaGVtYV0sXG4gIH0sXG4gIHsgdHlwZUtleTogXCIkdHlwZVwiIH1cbik7XG5cbmxldCB1c2VyID0gbW9uZ29vc2UubW9kZWwoXCJVc2VyXCIsIHVzZXJTY2hlbWEpIHx8IG1vbmdvb3NlLm1vZGVsKCdVc2VyJykgXG5cbmV4cG9ydCBkZWZhdWx0IHVzZXJcbiJdLCJuYW1lcyI6WyJtb25nb29zZSIsInNhdmVkU2NoZW1hIiwiU2NoZW1hIiwicmVnaXN0cmF0aW9uIiwidHlwZSIsIlN0cmluZyIsInJlcXVpcmVkIiwiZW5naW5lU2l6ZSIsImZ1ZWxUeXBlIiwibWFrZSIsIm1vZGVsIiwicHJpbWFyeUNvbG91ciIsInNjb3JlIiwiTnVtYmVyIiwiYXZnU2NvcmUiLCJ1c2VyU2NoZW1hIiwiZW1haWwiLCJzYXZlZCIsInR5cGVLZXkiLCJ1c2VyIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./services/user.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("./pages/api/handler/index.js"));
module.exports = __webpack_exports__;

})();